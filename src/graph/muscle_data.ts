import Spline from 'cubic-spline'

const points = [
    {
        x: [-4.78, -4.33, -3.62, -2.47, -0.59, 25],
        y: [2671.21, 2114.06, 1502.47, 738.72, 160.96, 0],
    },
    {
        x: [-4.84, -3.2, 1.06, 8.07, 16.78, 25],
        y: [3840.35, 2288.2, 900.71, 282.35, 34.33, 0],
    },
    {
        x: [-4.77, -3.06, 1.41, 11.88, 25],
        y: [4976.63, 3373.28, 1825.7, 751.06, 82.32],
    },
    {
        x: [-4.53, -1.6, 3.45, 12.15, 25],
        y: [5995.38, 3746.83, 2430.5, 1293.77, 312.22],
    },
    {
        x: [-3.37, -0.98, 4.52, 12.28, 25],
        y: [5997.16, 4565.09, 3088.67, 1848.82, 504.82],
    },
    {
        x: [-1.66, 1.86, 6.69, 13.6, 25],
        y: [6021.85, 4582.88, 3462.22, 2231.19, 726.98],
    },
    {
        x: [0.6, 3.59, 8.42, 14.83, 25],
        y: [5994.88, 5027.58, 3835.77, 2514.88, 924.79],
    },
]

const splines = points.map((ps) => new Spline(ps.x, ps.y))

function valueAt(bar: number, x: number): number | undefined {
    if (x < points[bar].x[0] || x > points[bar].x[points[bar].x.length - 1])
        return undefined

    return splines[bar].at(x)
}

export { valueAt }
